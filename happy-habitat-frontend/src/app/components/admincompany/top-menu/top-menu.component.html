<nav class="w-full p-2">
  <div class="navbar w-full bg-base-200 sm:menu-horizontal rounded-box shadow-sm p-1 py-0">
    <div class="navbar-start lg:hidden p-1 py-0">
      <div class="dropdown">
        <div tabindex="0" role="button" class="btn btn-ghost">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
          </svg>
        </div>
        <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-1 shadow flex">
          @for (item of mainMenuItems; track item.route) {
            @if (item.route === 'reportes') {
              <li class="py-1">
                <span class="menu-label gap-1 text-base-content/70">
                  <i [class]="item.icon"></i>
                  {{ item.label }}
                </span>
              </li>
              @for (sub of reportesSubmenuItems; track sub.route) {
                <li class="py-1 pl-4">
                  <a
                    class="btn btn-ghost btn-sm justify-start"
                    [routerLink]="sub.route"
                    [routerLinkActive]="'btn-secondary text-white'"
                    [routerLinkActiveOptions]="{ exact: true }"
                  >
                    <i [class]="sub.icon" class="opacity-70"></i>
                    {{ sub.label }}
                  </a>
                </li>
              }
            } @else {
              <li class="py-1">
                <a
                  class="btn"
                  [routerLink]="item.route"
                  [routerLinkActive]="item.route === 'comunicados' ? '' : 'btn-secondary text-white'"
                  [routerLinkActiveOptions]="item.route === 'comunicados' ? { exact: false } : { exact: true }"
                  [class.btn-secondary]="item.route === 'comunicados' && isGestionarActive()"
                  [class.text-white]="item.route === 'comunicados' && isGestionarActive()"
                >
                  <i [class]="item.icon"></i>
                  {{ item.label }}
                </a>
              </li>
            }
          }
        </ul>
      </div>
    </div>
    <ul class="menu hidden menu-horizontal px-1 md:flex lg:flex xl:flex p-1">
      @for (item of mainMenuItems; track item.route) {
        @if (item.route === 'reportes') {
          <li>
            <details class="dropdown" [attr.open]="isReportesActive() ? true : null">
              <summary
                class="btn rounded-btn"
                [class.btn-secondary]="isReportesActive()"
                [class.text-white]="isReportesActive()"
              >
                <i [class]="item.icon"></i>
                {{ item.label }}
              </summary>
              <ul class="menu dropdown-content bg-base-100 rounded-box z-[1] mt-2 w-56 p-2 shadow-lg border border-base-300">
                @for (sub of reportesSubmenuItems; track sub.route) {
                  <li>
                    <a
                      [routerLink]="sub.route"
                      [routerLinkActive]="'bg-base-200 font-semibold'"
                      [routerLinkActiveOptions]="{ exact: true }"
                      class="gap-2 rounded-btn"
                    >
                      <i [class]="sub.icon" class="opacity-70 w-4"></i>
                      {{ sub.label }}
                    </a>
                  </li>
                }
              </ul>
            </details>
          </li>
        } @else {
          <li>
            <a
              class="btn"
              [routerLink]="item.route"
              [routerLinkActive]="item.route === 'comunicados' ? '' : 'btn-secondary text-white'"
              [routerLinkActiveOptions]="item.route === 'comunicados' ? { exact: false } : { exact: true }"
              [class.btn-secondary]="item.route === 'comunicados' && isGestionarActive()"
              [class.text-white]="item.route === 'comunicados' && isGestionarActive()"
            >
              <i [class]="item.icon"></i>
              {{ item.label }}
            </a>
          </li>
        }
      }
    </ul>
  </div>
</nav>

@if (showSecondaryBar()) {
  <nav class="w-full px-2 pb-2 pt-0">
    <div class="flex flex-wrap items-center gap-2 px-2 pb-2 pt-0">
      @for (item of secondaryMenuItems; track item.route) {
        <a
          class="btn btn-ghost btn-sm gap-2 border-2 border-transparent rounded-btn"
          [routerLink]="item.route"
          [class.border-primary]="activeSecondaryKey() === item.route"
          [class.text-primary]="activeSecondaryKey() === item.route"
          [class.font-semibold]="activeSecondaryKey() === item.route"
        >
          <i [class]="item.icon"></i>
          {{ item.label }}
        </a>
      }
    </div>
  </nav>
}
