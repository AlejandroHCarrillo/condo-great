<div class="w-full max-w-4xl p-4 sm:p-6 md:p-8 ">
    <!-- T√≠tulo -->
    <h2 class="text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 flex items-center gap-2">
        <i class="fa-solid fa-users-viewfinder text-primary"></i>
        <span>Registrar visitantes</span>
    </h2>
    
    <!-- Formulario -->
    <div class="card bg-base-100 shadow-lg  bg-base-200">
        <div class="card-body p-4 sm:p-6 md:p-8">
            <form [formGroup]="myForm" (ngSubmit)="onSave()" class="space-y-4 sm:space-y-6">
                
                <!-- üßç Nombre + üë• Total de personas -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="form-control">
                        <label class="label font-semibold" for="name">
                            <span class="label-text">Nombre del visitante</span>
                        </label>
                        <input 
                            id="name" 
                            type="text" 
                            formControlName="name" 
                            class="input input-bordered w-full"
                            [class.input-error]="!formUtils.isValidField(myForm, 'name')"
                            placeholder="Ingrese el nombre completo"
                        />
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'name')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'name') || ''"
                        />
                    </div>

                    <div class="form-control">
                        <label class="label font-semibold" for="totalpersons">
                            <span class="label-text">N√∫mero de personas</span>
                        </label>
                        <input 
                            id="totalpersons" 
                            type="number" 
                            formControlName="totalpersons" 
                            class="input input-bordered w-full"
                            [class.input-error]="!formUtils.isValidField(myForm, 'totalpersons')"
                            min="1"
                            placeholder="1"
                        />
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'totalpersons')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'totalpersons') || ''"
                        />
                    </div>
                </div>

                <!-- üöó Informaci√≥n del veh√≠culo -->
                <div class="divider">
                    <span class="text-sm text-base-content/60">Informaci√≥n del veh√≠culo (opcional)</span>
                </div>

                <!-- üöó Descripci√≥n + üé® Color + üî¢ Placas -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="form-control">
                        <label class="label font-semibold" for="cardescription">
                            <span class="label-text hidden sm:inline">Descripci√≥n del veh√≠culo</span>
                            <span class="label-text sm:hidden">Descripci√≥n</span>
                        </label>
                        <input 
                            id="cardescription" 
                            type="text" 
                            formControlName="cardescription" 
                            class="input input-bordered w-full"
                            placeholder="Ej: Sed√°n, SUV, etc."
                        />
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'cardescription')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'cardescription') || ''"
                        />
                    </div>

                    <div class="form-control">
                        <label class="label font-semibold" for="carcolor">
                            <span class="label-text">Color</span>
                        </label>
                        <select 
                            class="select select-bordered w-full" 
                            formControlName="carcolor"
                        >
                            <option value="">Seleccione un color</option>
                            @for (color of colores; track $index) {
                                <option [value]="color">{{ color | titlecase }}</option>
                            }
                        </select>
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'carcolor')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'carcolor') || ''"
                        />
                    </div>

                    <div class="form-control">
                        <label class="label font-semibold" for="carplates">
                            <span class="label-text">Placas</span>
                        </label>
                        <input 
                            id="carplates" 
                            type="text" 
                            formControlName="carplates" 
                            class="input input-bordered w-full"
                            placeholder="ABC-123"
                        />
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'carplates')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'carplates') || ''"
                        />
                    </div>
                </div>

                <!-- üìù Asunto -->
                <div class="form-control">
                    <label class="label font-semibold" for="subject">
                        <span class="label-text">Asunto de la visita</span>
                    </label>
                    <textarea 
                        id="subject" 
                        formControlName="subject" 
                        class="textarea textarea-bordered w-full min-h-24"
                        [class.textarea-error]="!formUtils.isValidField(myForm, 'subject')"
                        placeholder="Describa el motivo de la visita..."
                    ></textarea>
                    <show-form-error-template
                        [isValid]="formUtils.isValidField(myForm, 'subject')"
                        [errorMessage]="formUtils.getFieldError(myForm, 'subject') || ''"
                    />
                </div>

                <!-- üìÖ Fechas de ingreso y salida -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="form-control">
                        <label class="label font-semibold" for="arriveDate">
                            <span class="label-text">Fecha de ingreso</span>
                        </label>
                        <input 
                            id="arriveDate" 
                            type="date" 
                            formControlName="arriveDate" 
                            class="input input-bordered w-full"
                            [class.input-error]="!formUtils.isValidField(myForm, 'arriveDate')"
                        />
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'arriveDate')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'arriveDate') || ''"
                        />
                    </div>
                    
                    <div class="form-control">
                        <label class="label font-semibold" for="departureDate">
                            <span class="label-text">Fecha de salida</span>
                        </label>
                        <input 
                            id="departureDate" 
                            type="date" 
                            formControlName="departureDate" 
                            class="input input-bordered w-full"
                        />
                        <show-form-error-template
                            [isValid]="formUtils.isValidField(myForm, 'departureDate')"
                            [errorMessage]="formUtils.getFieldError(myForm, 'departureDate') || ''"
                        />
                    </div>
                </div>

                <!-- ‚úÖ Bot√≥n de env√≠o -->
                <div class="form-control mt-6 flex justify-start sm:justify-end">
                    <button 
                        type="submit" 
                        class="btn btn-primary text-white w-full sm:w-auto min-w-32"
                        [disabled]="myForm.invalid"
                    >
                        <i class="fa-solid fa-save mr-2"></i>
                        Registrar visita
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>
