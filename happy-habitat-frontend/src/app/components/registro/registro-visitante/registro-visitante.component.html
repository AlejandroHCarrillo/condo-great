<!-- <p>Esta pagina permite registrar a una persona o grupo de personas que nos van a visitar</p> -->
<!-- <h2>Reactivos: B√°sicos</h2>
<hr>

<span>
    errors: 
    <pre>Name: {{ myForm.controls['name'].errors | json }}</pre>
    <pre>Price: {{ myForm.controls['price'].errors | json }}</pre>
    <pre>In Storage: {{ myForm.controls['inStorage'].errors | json }}</pre>
</span> -->


<div class="max-w-2xl mx-auto p-4 bg-base-200 rounded-box shadow-md">
    <h2 class="text-2xl font-bold mb-4 flex flex-row">
        <span class="text-2xl">
        <i class="fa-solid fa-users-viewfinder"></i>&nbsp;
        </span>
        <span>Registrar visitantes</span>
    </h2>
            
    <form [formGroup]="myForm" (ngSubmit)="onSave()" class="space-y-6">

    <!-- üßç Nombre + üë• Total de personas -->
    <div class="flex gap-4 flex-wrap sm:flex-nowrap">
        <div class="form-control w-1/2">
            <label class="label  font-semibold" for="name">Nombre del visitante</label>
            <input id="name" type="text" formControlName="name" class="input input-bordered" />
            <!-- Con este validador verificamos los errores del campo -->
            <show-form-error-template
                [isValid]="formUtils.isValidField(myForm, 'name')"
                [errorMessage]="formUtils.getFieldError(myForm, 'name')"
            />
        </div>

        <div class="form-control w-1/2">
            <label class="label  font-semibold" for="totalpersons">N√∫mero de personas</label>
            <input id="totalpersons" type="number" formControlName="totalpersons" class="input input-bordered" />
            <!-- Con este validador verificamos los errores del campo -->
            <show-form-error-template
                [isValid]="formUtils.isValidField(myForm, 'totalpersons')"
                [errorMessage]="formUtils.getFieldError(myForm, 'totalpersons')"
            />
        </div>
    </div>

    <!-- üöó Descripci√≥n + üé® Color + üî¢ Placas -->
    <div class="flex gap-4 flex-wrap sm:flex-nowrap">
        <div class="form-control w-1/3">
            <label class="label hidden sm:inline font-semibold" for="cardescription">Descripci√≥n del veh√≠culo</label>
            <label class="label sm:hidden inline font-semibold" for="cardescription">Descripci√≥n</label>
            <input id="cardescription" type="text" formControlName="cardescription" class="input input-bordered" />
            <!-- Con este validador verificamos los errores del campo -->
            <show-form-error-template
                [isValid]="formUtils.isValidField(myForm, 'cardescription')"
                [errorMessage]="formUtils.getFieldError(myForm, 'cardescription')"
            />
        </div>

        <div class="form-control w-1/3">
            <label class="label  font-semibold" for="carcolor">Color</label><br>
            <select class="select w-50 " formControlName="carcolor">
                <option >seleccione un color</option>
                @for (color of colores ; track $index) {
                    <option>{{ color| titlecase }}</option>
                }
            </select>
            <!-- <input id="carcolor" type="text" formControlName="carcolor" class="input input-bordered" /> -->
            
            <!-- Con este validador verificamos los errores del campo -->
            <show-form-error-template
                [isValid]="formUtils.isValidField(myForm, 'carcolor')"
                [errorMessage]="formUtils.getFieldError(myForm, 'carcolor')"
            />
        </div>

        <div class="form-control w-1/3">
            <label class="label  font-semibold" for="carplates">Placas</label>
            <input id="carplates" type="text" formControlName="carplates" class="input input-bordered" />
            <!-- Con este validador verificamos los errores del campo -->
            <show-form-error-template
                [isValid]="formUtils.isValidField(myForm, 'carplates')"
                [errorMessage]="formUtils.getFieldError(myForm, 'carplates')"
            />
        </div>
    </div>

    <!-- üìù Asunto -->
    <div class="form-control">
        <label class="label  font-semibold" for="subject">Asunto</label>
        <textarea id="subject" formControlName="subject" class="textarea textarea-bordered w-full"></textarea>
            <!-- Con este validador verificamos los errores del campo -->
            <show-form-error-template
                [isValid]="formUtils.isValidField(myForm, 'subject')"
                [errorMessage]="formUtils.getFieldError(myForm, 'subject')"
            />
    </div>

    <!-- üìÖ Fechas de ingreso y salida -->
    <div class="flex gap-4 flex-wrap sm:flex-nowrap">
        <div class="form-control w-1/2">
            <label class="label  font-semibold" for="arriveDate">Fecha de ingreso</label>
            <input id="arriveDate" type="date" formControlName="arriveDate" class="input input-bordered" />
        </div>
        <div class="form-control w-1/2">
        <label class="label  font-semibold" for="departureDate">Fecha de salida</label>
        <input id="departureDate" type="date" formControlName="departureDate" class="input input-bordered" />
        </div>
    </div>

    <!-- ‚úÖ Bot√≥n de env√≠o -->
    <div class="form-control mt-4  flex justify-end">
        <button type="submit" class="btn btn-primary text-white" [disabled]="myForm.invalid">
        Registrar visita
        </button>
    </div>

    </form>

</div>

<div class="row">
    <div class="col">

        <span>Valid</span>
        <pre>{{ myForm.valid| json }}</pre>

        <span>Pristine</span>
        <pre>{{ myForm.pristine| json }}</pre>

        <span>Touched</span>
        <pre>{{ myForm.touched| json }}</pre>

        <span>Value</span>
        <pre>{{ myForm.value | json }}</pre>

        <span>Visitante</span>
        <pre>{{ myForm.controls['name'].value | json }}</pre>

        <span>personas</span>
        <pre>{{ myForm.controls['name'].value | json }}</pre>
    </div>
</div>
